{% extends 'base.html' %}
{% block content %}

{% if not request.user.is_staff %}
<header class="bg-light bg-opacity-70 text-black text-center py-5">
    <div class="container">
        <h1>Bienvenidos a Vivero Verde Vida</h1>
        <p class="lead">Conectamos tu vida con la naturaleza</p>
    </div>
</header>
<hr class="m-0">
{% endif %}

{% if request.user.is_authenticated and request.user.is_staff %}
<section id="admin-dashboard" class="bg-light bg-opacity-75 py-5">
    <div class="container">
        <h2 class="text-center mb-4">📊 Panel de Administrador</h2>

        <div class="row justify-content-center">
            <!-- Tarjeta de Total de Plantas -->
            <div class="col-md-4">
                <div class="card text-center shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title">🌱 Plantas Registradas</h5>
                        <p class="display-6 fw-bold">{{ total_plants }}</p>
                    </div>
                </div>
            </div>

            <!-- Tarjeta de Total de Usuarios -->
            <div class="col-md-4">
                <div class="card text-center shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title">👥 Usuarios Registrados</h5>
                        <p class="display-6 fw-bold">{{ total_users }}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lista de Plantas con Stock Bajo -->
        <div class="mt-5">
            <h3 class="text-center">🌿 Plantas con Stock Bajo</h3>
            {% if low_stock_plants %}
            <div class="table-responsive">
                <table class="table table-bordered table-striped mt-3">
                    <thead class="table-success">
                        <tr>
                            <th>Nombre</th>
                            <th>Stock</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for plant in low_stock_plants %}
                        <tr>
                            <td>{{ plant.plant_name }}</td>
                            <td class="text-danger fw-bold">{{ plant.stock }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <p class="text-muted text-center">No hay plantas con stock bajo.</p>
            {% endif %}
        </div>
    </div>
</section>

<hr class="m-0">
{% else %}
<section id="productos" class="bg-light bg-opacity-75 w-100 py-5">
    <div class="container">
        <h2 class="text-center">🌿 ¿Qué encontrarás en nuestra tienda? 🌿</h2>
        <div class="row text-center mt-4">
            <div class="col-md-4">
                <h4>🌵 Plantas y suculentas</h4>
            </div>
            <div class="col-md-4">
                <h4>🌳 Árboles frutales</h4>
            </div>
            <div class="col-md-4">
                <h4>🪴 Macetas y accesorios</h4>
            </div>
        </div>
    </div>
</section>
<hr class="m-0">

<section id="contacto" class="bg-light bg-opacity-75 py-5">
    <div class="container text-center">
        <h2>📦 ¡Compra fácil y seguro!</h2>
        <p>Hacemos envíos a domicilio en Facatativá y sus alrededores.</p>
        <a href="{% url 'catalogoPlantas' %}" class="btn" style="background-color: rgb(107, 142, 35); color: white;">Ver
            Catálogo</a>
    </div>
</section>
{% endif %}

{% endblock %}